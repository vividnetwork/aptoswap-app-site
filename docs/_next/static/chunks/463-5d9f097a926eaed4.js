(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[463],{8197:function(a,b,c){"use strict";c.d(b,{t:function(){return j},u:function(){return k}});var d=c(5893),e=c(7294),f=c(3935),g=c(1838),h=c(7815),i=(0,e.createContext)({modalFrameRef:null}),j=function(a){var b=a.children,c=(0,e.useRef)(null);return(0,d.jsxs)(i.Provider,{value:{modalFrameRef:c},children:[b,(0,d.jsx)("div",{style:{position:"fixed",left:0,top:0},ref:c})]})},k=function(a){var b,c=a.children,j=a.presented,k=a.setPresented,l=a.title,m=a.subtitle,n=a.contentWidth,o=(0,e.useContext)(i).modalFrameRef,p=(0,e.useRef)(null),q=(0,e.useRef)(null),r=null!==(b=(0,h.o)().window.width)&& void 0!==b?b:0,s=(r-20)/Math.max(null!=n?n:1,void 0!==l?486:1);if((s<0||s>=1)&&(s=void 0),null===o||null===o.current)return(0,d.jsx)(d.Fragment,{});var t=(0,d.jsxs)("div",{id:"modal-context-background-ref",ref:p,style:{margin:"0px",width:"100%",height:"100%",position:"fixed",top:0,left:0},onClick:function(a){var b=a.target.id;("modal-context-background-ref"===b||"modal-context-background-ref-bg"===b||"modal-context-background-ref-fg"===b)&& void 0!==k&&k(!1)},children:[(0,d.jsx)(g.A,{blurScale:.4,useImage:!1,id:"modal-context-background-ref-bg",opacity:.6}),(0,d.jsx)("div",{id:"modal-context-background-ref-fg",style:{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"0px"},children:(0,d.jsxs)("div",{className:"modal-background-content-frame",style:{zoom:s},children:[(0,d.jsxs)("div",{className:"modal-background-frame-title-frame",style:{width:486},children:[void 0!==l?(0,d.jsx)("span",{className:"modal-background-frame-title",children:l}):(0,d.jsx)(d.Fragment,{}),void 0!==m?(0,d.jsx)("span",{className:"modal-background-frame-subtitle",children:m}):(0,d.jsx)(d.Fragment,{})]}),(0,d.jsx)("div",{ref:q,style:{boxShadow:"-21px 24px 11px rgba(204, 201, 201, 0.3)",borderRadius:"40px"},children:c})]})})]}),u=(0,f.createPortal)(t,o.current);return j?u:(0,d.jsx)(d.Fragment,{})}},7815:function(a,b,c){"use strict";c.d(b,{K:function(){return j},o:function(){return k}});var d=c(1438),e=c(8029),f=c(5950),g=c(5893),h=c(7294),i=(0,h.createContext)({window:{width:null,height:null}}),j=function(a){(0,e.Z)(c,a);var b=(0,f.Z)(c);function c(){var a;return(0,d.Z)(this,c),a=b.apply(this,arguments),a.state={window:{width:null,height:null}},a.render=function(){return(0,g.jsx)(i.Provider,{value:a.state,children:a.props.children})},a.handleResize=function(){var b={width:window.innerWidth,height:window.innerHeight};a.setState({window:{width:b.width,height:b.height}})},a.componentDidMount=function(){a.handleResize(),window.addEventListener("resize",a.handleResize)},a.componentWillUnmount=function(){window.removeEventListener("resize",a.handleResize)},a}return c}(h.Component),k=function(){return(0,h.useContext)(i)}},5402:function(a,b,c){"use strict";c.d(b,{z:function(){return t},O:function(){return u}});var d=c(7568),e=c(9815),f=c(4051),g=c.n(f),h=c(5893),i=c(5675),j=c.n(i),k=c(7294),l=c(6899),m=c(998),n=c(1799),o=function(a){var b=a.text,c=a.children,d=a.fontSize,e=a.fontWeight,f=a.onClick,g=a.style,i=a.classes;return(0,h.jsxs)("a",{onClick:f,className:"dbutton"+(void 0!==i?" "+i:""),style:(0,n.Z)({color:"white",fontSize:null!=d?d:18,fontWeight:null!=e?e:500},null!=g?g:{}),children:[c,(0,h.jsx)("span",{children:b})]})},p=c(8197),q=function(a){var b,c,d,e,f,g=a.walletType,i=a.onClick,k=a.text,l=(null===(b=g.extension)|| void 0===b?void 0:b.favoritePriority)!==void 0,m=l&&null!==(f=null===(c=g.extension)|| void 0===c?void 0:c.favoriteAdditionalLogoUrl)&& void 0!==f?f:g.logoUrl,n=l?null===(d=g.extension)|| void 0===d?void 0:d.favoriteAdditionalButtonStyle:void 0,p=l?null===(e=g.extension)|| void 0===e?void 0:e.favoriteAdditionalTitleClass:void 0;return(0,h.jsxs)("div",{className:"modal-wallet-wallet-list-item-frame",children:[(0,h.jsxs)("div",{className:"modal-wallet-wallet-list-item-left-frame",children:[(0,h.jsx)(j(),{alt:"",src:m,width:30,height:30,style:{borderRadius:"15px",overflow:"hidden"}}),(0,h.jsx)("span",{children:g.name})]}),(0,h.jsx)(o,{classes:p,style:n,text:k,onClick:i})]})},r=function(a){var b=a.walletOptStates,c=a.onClickConnectWallet,d=(0,k.useMemo)(function(){var a=b.filter(function(a){var b;return(null===(b=a.walletType.extension)|| void 0===b?void 0:b.favoritePriority)!==void 0});return a.sort(function(a,b){var c,d,e,f,g=null!==(e=null===(c=a.walletType.extension)|| void 0===c?void 0:c.favoritePriority)&& void 0!==e?e:0,h=null!==(f=null===(d=b.walletType.extension)|| void 0===d?void 0:d.favoritePriority)&& void 0!==f?f:0;return g>h?-1:g<h?1:0}),a},[b]),f=(0,k.useMemo)(function(){return b.filter(function(a){var b;return(null===(b=a.walletType.extension)|| void 0===b?void 0:b.favoritePriority)===void 0})},[b]),g=(0,k.useMemo)(function(){return(0,e.Z)(d).concat((0,e.Z)(f))},[d,f]);return(0,h.jsxs)("div",{className:"modal-wallet-frame",children:[(0,h.jsx)("div",{className:"modal-wallet-title-frame",children:(0,h.jsx)("span",{children:"Sellect Your Wallet"})}),(0,h.jsx)("div",{className:"modal-wallet-panel-frame",children:g.length>0?g.map(function(a){return(0,h.jsx)(q,{walletType:a.walletType,text:null!==a.wallet?"Connect":"Get",onClick:function(){c(a)}},a.walletType.name)}):(0,h.jsx)("span",{style:{fontStyle:"normal",fontWeight:"500",fontSize:"21px",lineHeight:"32px",color:"#9da3ae"},children:"No Avaliable Wallet Found"})})]})},s=(0,k.createContext)({walletStates:[],currentWalletState:null,walletModalPresented:!1,currentWalletConnected:"unknown",setCurrentWalletConnected:function(){},setWalletModalPresented:function(){},refreshAvaliableWallets:function(){}}),t=function(a){var b=a.children,c=a.preferredAutoConnectWalletName,e=(0,k.useMemo)(function(){return(0,l.qp)()},[]),f=(0,k.useMemo)(function(){return e.map(function(a){return a.initializeEventName}).filter(function(a){return void 0!==a})},[e]),i=(0,k.useState)(!1),j=i[0],n=i[1],o=(0,k.useState)([]),q=o[0],t=o[1],u=(0,k.useState)([]),v=u[0],w=u[1],x=(0,k.useState)(null),y=x[0],z=x[1],A=(0,k.useState)("unknown"),B=A[0],C=A[1],D=(0,k.useCallback)(function(){var a,b=e.map(function(a){return{walletType:a,wallet:a.acquire()}}),f=b.filter(function(a){return null!==a.wallet});w(f),t(b),(a=(0,d.Z)(g().mark(function a(){var b,d,e,h;return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b=f.map(function(a){return a.wallet.isConnected()}),a.next=3,Promise.all(b);case 3:(e=(d=a.sent).flatMap(function(a,b){return a?[f[b]]:[]})).length>=1&&((h=void 0!==c?e.findIndex(function(a){return a.walletType.name===c}):0)<0&&(h=0),console.log("Auto detecting connection for wallet: ".concat(e[h].walletType.name)),z(e[h]),C("connected"));case 6:case"end":return a.stop()}},a)})),function(){return a.apply(this,arguments)})()},[e,c]);(0,k.useEffect)(function(){D();var a=function(){D()};return f.forEach(function(b){window.addEventListener(b,a)}),function(){f.forEach(function(b){window.removeEventListener(b,a)})}},[f,D]);var E=(0,k.useCallback)(function(a){if(n(!1),null===a.wallet)window.open(a.walletType.href,"_blank");else{var b=v.find(function(b){return b.walletType.name==a.walletType.name});if(void 0!==b){z(b);var c,e=b.wallet;(c=(0,d.Z)(g().mark(function a(){var c,d,f;return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.isConnected();case 3:if(c=a.sent,d=new CustomEvent(m.Nn.NEW_WALLET_CONNECT,{detail:{wallet:e,walletType:b.walletType}}),C(c?"connected":"disconnected"),c){a.next=14;break}return a.next=9,e.connect();case 9:C(f=a.sent),window.dispatchEvent(d),a.next=15;break;case 14:window.dispatchEvent(d);case 15:a.next=21;break;case 17:a.prev=17,a.t0=a.catch(0),console.log("Error when trying to connect wallet."),console.log(a.t0);case 21:case"end":return a.stop()}},a,null,[[0,17]])})),function(){return c.apply(this,arguments)})()}}},[v]);return(0,h.jsxs)(s.Provider,{value:{walletStates:v,currentWalletConnected:B,setCurrentWalletConnected:C,currentWalletState:y,walletModalPresented:j,setWalletModalPresented:n,refreshAvaliableWallets:D},children:[b,(0,h.jsx)(p.u,{presented:j,setPresented:n,title:"Select Wallet",subtitle:"Select your wallet to connect with",contentWidth:615,children:(0,h.jsx)(r,{walletOptStates:q,onClickConnectWallet:E})})]})},u=function(){var a=(0,k.useContext)(s),b=a.currentWalletState,c=a.currentWalletConnected,e=a.setCurrentWalletConnected,f=a.walletModalPresented,h=a.setWalletModalPresented,i=a.refreshAvaliableWallets,j=(0,k.useCallback)(function(){i(),h(!0)},[h,i]),l=(0,k.useCallback)(function(){h(!1)},[h]),m=(0,k.useCallback)(function(){if(null!==b){var a;(a=(0,d.Z)(g().mark(function a(){var c;return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.wallet.connect();case 2:e(c=a.sent);case 4:case"end":return a.stop()}},a)})),function(){return a.apply(this,arguments)})()}},[b,e]),n=(0,k.useCallback)(function(){if(null!==b&& void 0!==b.wallet.disconnect){var a;(a=(0,d.Z)(g().mark(function a(){var c;return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.wallet.disconnect();case 2:e(c=a.sent);case 4:case"end":return a.stop()}},a)})),function(){return a.apply(this,arguments)})()}},[b,e]);return{walletType:null===b?null:b.walletType,wallet:null===b?null:b.wallet,connected:c,canSigned:null!==b&&"connected"===c,connect:m,disconnect:null===b|| void 0===b.wallet.disconnect?void 0:n,presentModal:j,dismissModal:l,walletModalPresented:f}}},6899:function(a,b,c){"use strict";c.d(b,{nu:function(){return r},qp:function(){return u}});var d=c(7568),e=c(1438),f=c(2222),g=c(4051),h=c.n(g),i=c(9694),j=c(6628),k=c(998),l=c(2836),m=c.n(l),n=c(8558),o=c(4284),p=c(5439),q=c(3032),r=function(){function a(b){var c=b.txHash,d=b.message,f=b.object,g=this;(0,e.Z)(this,a),this.isSuccess=function(){return void 0===g.message},this.isTimeout=function(){return"timeout"===g.message},this.txHash=c,this.message=d,this.object=f}return a.Success=function(b,c){return new a({txHash:b,object:c})},a.Timeout=function(b,c){return new a({txHash:b,object:c,message:"timeout"})},a.Fail=function(b,c,d){return new a({message:b,txHash:c,object:d})},a}(),s=[{name:"Sui Wallet",logoUrl:"/images/token/sui.svg",href:"https://chrome.google.com/webstore/detail/sui-wallet/opcgpfmipidbgpenhmajoajpbobppdil",acquire:function(){return void 0!==window&& void 0!==window.suiWallet?new A(new v):null}},{name:"Suiet",logoUrl:"/images/wallet/suiet-wallet.svg",href:"https://suiet.app/",acquire:function(){return void 0!==window&& void 0!==window.__suiet__?new A(new w):null}},],t=[{name:"Pontem Wallet",logoUrl:"/images/wallet/pontem-wallet.svg",href:"https://pontem.network/pontem-wallet",acquire:function(){if(void 0!==window){var a=window.pontem;if(void 0!==a)return new I(new E(a))}return null},extension:{favoritePriority:1e4,favoriteAdditionalLogoUrl:"/images/wallet/pontem-wallet-grow.svg",favoriteAdditionalTitleClass:"misc-pontem-wallet-wallet-connect-button"}},{name:"Blocto Wallet",logoUrl:"/images/wallet/blocto-wallet.svg",href:"https://portto.com/download",acquire:function(){if(void 0!==window){var a=new q.BloctoWalletAdapter({network:C.getNetwork(),timeout:1e4,bloctoAppId:C.getNetwork()==q.WalletAdapterNetwork.Mainnet?"251f803e-2de3-4e41-8b81-df11329de879":"78356a92-f1bf-497d-b2e3-331fd62df4f0"});return a.readyState==q.WalletReadyState.NotDetected||a.readyState==q.WalletReadyState.Unsupported?null:new I(new C(a))}return null}},{name:"Martian Wallet",logoUrl:"/images/wallet/martian-wallet.svg",href:"https://martianwallet.xyz/",acquire:function(){if(void 0!==window){var a=window.martian;if(void 0!==a)return new I(new F(a))}return null}},{name:"Petra",logoUrl:"/images/wallet/petra-wallet.svg",href:"https://petra.app/",acquire:function(){if(void 0!==window){var a=window.aptos;if(void 0!==a)return new I(new B(a))}return null}},{name:"Fewcha",logoUrl:"/images/wallet/fewcha-wallet.svg",href:"https://fewcha.app/",initializeEventName:"fewcha#initialized",acquire:function(){return void 0!==window&& void 0!==window.fewcha?new I(new G(new(m())(new l.Web3Provider(window.fewcha).provider))):null}}],u=function(){return"sui"===(0,i.iE)().current?s:"aptos"==(0,i.iE)().current?t:[]},v=function a(){(0,e.Z)(this,a),this.state="unknown",this._wallet=function(){return window.suiWallet};var b=this;this.connect=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b._wallet().requestPermissions();case 2:b.state="connected";case 3:case"end":return a.stop()}},a)}));var c=this;this.disconnect=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:c.state="disconnected";case 1:case"end":return a.stop()}},a)}));var f=this;this.isConnected=(0,d.Z)(h().mark(function a(){var b;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if("unknown"!==f.state){a.next=5;break}return a.next=3,f._wallet().hasPermissions(["viewAccount"]);case 3:b=a.sent,f.state=b?"connected":"disconnected";case 5:return a.abrupt("return","connected"===f.state);case 6:case"end":return a.stop()}},a)}));var g=this;this.getAccounts=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",g._wallet().getAccounts());case 1:case"end":return a.stop()}},a)}));var i,j=this;this.executeMoveCall=(i=(0,d.Z)(h().mark(function a(b){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,j._wallet().executeMoveCall(b);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)})),function(a){return i.apply(this,arguments)})},w=function a(){(0,e.Z)(this,a);var b=this;this.connect=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.adapter.connect();case 2:case"end":return a.stop()}},a)}));var c=this;this.disconnect=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.adapter.disconnect();case 2:case"end":return a.stop()}},a)}));var f=this;this.isConnected=(0,d.Z)(h().mark(function a(){var b;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(null!==f.wallet){a.next=2;break}return a.abrupt("return",!1);case 2:return a.next=4,f.wallet.hasPermissions(["viewAccount","suggestTransactions"]);case 4:if(!(null!==(b=a.sent).data)){a.next=7;break}return a.abrupt("return",b.data);case 7:return a.abrupt("return",!1);case 8:case"end":return a.stop()}},a)}));var g=this;this.getAccounts=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.adapter.getAccounts();case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)}));var i,j=this;this.executeMoveCall=(i=(0,d.Z)(h().mark(function a(b){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,j.adapter.executeMoveCall(b);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)})),function(a){return i.apply(this,arguments)}),this.adapter=new p.FL,this.wallet=this.adapter.wallet},x=function(a,b){var c=a;if("address"===(c="string"==typeof a?a.startsWith("0x")||"@"===a||"$sender"===a?["address",a]:["string",a]:"number"==typeof a?["u64",a]:(void 0===a?"undefined":(0,f.Z)(a))==="bigint"?["u64",a]:a)[0]){var d=c[1].toString();"@"===d?c[1]=b.packageAddr:"$sender"===d&&(c[1]=b.sender)}return c},y=function(){function a(){(0,e.Z)(this,a)}return a.normalized=function(b,c){return{type:b.type,function:b.function.replace("@",c.packageAddr),type_arguments:b.type_arguments.map(function(a){return a.replace("@",c.packageAddr)}),arguments:b.arguments.map(function(b){return a._normalizArgument(b,c)})}},a}();y._normalizArgument=function(a,b){return x(a,b)},y.toBCSArgument=function(a,b){var c=a,d=(c="string"==typeof a?a.startsWith("0x")?["address",a]:["string",a]:"number"==typeof a?["u64",a]:(void 0===a?"undefined":(0,f.Z)(a))==="bigint"?["u64",a]:a)[0],e=c[1];if("address"===d){var g=e.toString();return"@"===g?g=b.packageAddr:"$sender"===g&&(g=b.sender),o.Ce.bcsToBytes(o.Kj.AccountAddress.fromHex(g))}if("string"===d)return o.Ce.bcsSerializeStr(e.toString());if("u8"===d)return o.Ce.bcsSerializeU8(Number(e));if("u16"===d)return o.Ce.bcsSerializeU16(Number(e));if("u32"===d)return o.Ce.bcsSerializeU32(Number(e));else if("u64"===d)return o.Ce.bcsSerializeUint64(BigInt(e));else if("u128"===d)return o.Ce.bcsSerializeU128(BigInt(e));throw Error("[AptosSerializer] BCS serialize error on argument: ".concat(a))},y.toPayload=function(a,b){var c=(0,i.qT)(),d=a.function.split("::"),e=d.slice(0,-1).join("::").replace("@",c),f=d.slice(-1)[0],g=a.type_arguments.map(function(a){return a.replace("@",c)}).map(function(a){return new o.Kj.TypeTagStruct(o.Kj.StructTag.fromString(a))}),h=a.arguments.map(function(a){return y.toBCSArgument(a,b)}),j=new o.Kj.TransactionPayloadEntryFunction(o.Kj.EntryFunction.natural(e,f,g,h));return j};var z=function a(){(0,e.Z)(this,a)};z._SERIALIZE_TRANSACTION_HAS_PREPARED=!1,z._normalizArgument=function(a,b){return!1!==z._SERIALIZE_TRANSACTION_HAS_PREPARED||(z._SERIALIZE_TRANSACTION_HAS_PREPARED=!0,n.$5I.hasType(Object.getPrototypeOf(n.$5I).ADDRESS)||n.$5I.registerAddressType(Object.getPrototypeOf(n.$5I).ADDRESS,20)),x(a,b)},z.toBCSArgument=function(a,b){var c=z._normalizArgument(a,b),d=c[0],e=c[1];if("address"===d)return n.$5I.ser(Object.getPrototypeOf(n.$5I).ADDRESS,e.toString()).toBytes();if("string"===d)return n.$5I.ser(Object.getPrototypeOf(n.$5I).STRING,e.toString()).toBytes();if("u8"===d)return n.$5I.ser(Object.getPrototypeOf(n.$5I).U8,e).toBytes();if("u16"===d)throw Error("Sui doesn't support u16 type bcs serialization");if("u32"===d)return n.$5I.ser(Object.getPrototypeOf(n.$5I).U32,e).toBytes();else if("u64"===d)return n.$5I.ser(Object.getPrototypeOf(n.$5I).U64,e).toBytes();else if("u128"===d)return n.$5I.ser(Object.getPrototypeOf(n.$5I).U128,e).toBytes();throw Error("[SuiSerializer] BCS serialize error on argument: ".concat(a))},z.toJsonArgument=function(a,b){var c=z._normalizArgument(a,b),d=c[0],e=c[1];return"address"===d||"string"===d?e.toString():Number(e)},z.toMoveTransaction=function(a,b){var c=(0,i.qT)(),d=a.function.split("::"),e=d[0].replace("@",c),f=d[1],g=d[2],h=a.type_arguments.map(function(a){return a.replace("@",c)}),j=a.arguments.map(function(a){return z.toJsonArgument(a,b)});return{packageObjectId:e,module:f,function:g,typeArguments:h,arguments:j,gasBudget:2e3}};var A=function a(b){(0,e.Z)(this,a);var c=this;this.connect=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.wallet.connect();case 2:return a.abrupt("return","connected");case 3:case"end":return a.stop()}},a)}));var f=this;this.disconnect=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.wallet.disconnect();case 2:return a.abrupt("return","disconnected");case 3:case"end":return a.stop()}},a)}));var g=this;this.isConnected=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.wallet.isConnected();case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)}));var l=this;this.getAccounts=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,l.wallet.getAccounts();case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)}));var m=this;this.getCurrentAccount=(0,d.Z)(h().mark(function a(){var b;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.wallet.getAccounts();case 2:return b=a.sent,a.abrupt("return",b.length>0?b[0]:null);case 4:case"end":return a.stop()}},a)}));var n=this;this.getCurrentAccountUnwrap=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.getCurrentAccount();case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)})),this.getMintTestCoinType=function(){(0,i.iE)();var a=(0,i.Bl)().suiswap.package;return{name:"".concat(a,"::pool::TestToken"),network:"sui"}},this.getGasFeePrice=function(){return k.K_.ONE};var o,p=this;this.swap=(o=(0,d.Z)(h().mark(function a(b){var c,d,e,f,g,j,l,m,n,o,q,s,t,u;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=b.client,d=b.pool,e=b.direction,f=b.amount,j=null!==(g=b.minOutputAmount)&& void 0!==g?g:k.K_.ZERO,l=(0,i.iE)(),!(f<=0||f>k.Iu.U64_MAX||j<k.K_.ZERO||j>k.Iu.U64_MAX)){a.next=9;break}return a.abrupt("return",r.Fail("Invalid input amount for swapping: ".concat(f," or minOutputAmount: ").concat(j)));case 9:if(!d.freeze){a.next=11;break}return a.abrupt("return",r.Fail("Cannot not swap for freeze pool: ".concat(d.addr)));case 11:return a.next=13,p.getCurrentAccount();case 13:if(null!==(m=a.sent)){a.next=16;break}return a.abrupt("return",r.Fail("Cannot get the current account address from wallet"));case 16:return n="forward"===e?d.type.xTokenType.name:d.type.yTokenType.name,a.next=19,c.getAccountCoins(m,[n]);case 19:if((o=a.sent).sort(function(a,b){return a.balance<b.balance?1:a.balance>b.balance?-1:0}),0!==o.length){a.next=23;break}return a.abrupt("return",r.Fail("The account doesn't hold the coin for swapping: ".concat(n)));case 23:if(!((q=o[0]).balance<f)){a.next=26;break}return a.abrupt("return",r.Fail("The account has insuffcient balance for swapping, current balance: ".concat(q.balance,", expected: ").concat(f)));case 26:return a.next=28,p._checkGasFeeAvaliable(c,m,[q.addr],p.getSwapEstimatedGas()*p.getGasFeePrice());case 28:if(s=a.sent){a.next=31;break}return a.abrupt("return",r.Fail("Cannot find the gas payment or not enough amount for paying the gas"));case 31:return t={packageObjectId:(0,i.Bl)().suiswap.package,module:"pool",function:"forward"==e?"swap_x_to_y":"swap_y_to_x",typeArguments:[d.type.xTokenType.name,d.type.yTokenType.name],arguments:[d.addr,q.addr,f.toString(),j.toString(),],gasBudget:Number(p.getSwapEstimatedGas())},a.next=34,p._executeTransacation(t);case 34:return u=a.sent,a.abrupt("return",u);case 36:case"end":return a.stop()}},a)})),function(a){return o.apply(this,arguments)});var q,s=this;this.addLiqudity=(q=(0,d.Z)(h().mark(function a(b){var c,d,e,f,g,l,m,n,o,p,q,t,u,v;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=b.client,d=b.pool,e=b.xAmount,f=b.yAmount,g=(0,i.iE)(),!(e<=0||e>k.Iu.U64_MAX||f<=0||f>k.Iu.U64_MAX)){a.next=7;break}return a.abrupt("return",r.Fail("Invalid input amount for adding liqudity: ".concat(e," or minOutputAmount: ").concat(f)));case 7:if(!d.freeze){a.next=9;break}return a.abrupt("return",r.Fail("Cannot not swap for freeze pool: ".concat(d.addr)));case 9:return a.next=11,s.getCurrentAccount();case 11:if(null!==(l=a.sent)){a.next=14;break}return a.abrupt("return",r.Fail("Cannot get the current account address from wallet"));case 14:return a.next=16,c.getAccountCoins(l,[d.type.xTokenType.name,d.type.yTokenType.name]);case 16:if(n=(m=a.sent).filter(function(a){return(0,j.r2)(a.type,d.type.xTokenType)}),o=m.filter(function(a){return(0,j.r2)(a.type,d.type.yTokenType)}),n.sort(function(a,b){return a.balance<b.balance?1:a.balance>b.balance?-1:0}),o.sort(function(a,b){return a.balance<b.balance?1:a.balance>b.balance?-1:0}),0!==n.length){a.next=23;break}return a.abrupt("return",r.Fail("The account doesn't hold the coin for adding liqudity: ".concat(d.type.xTokenType.name)));case 23:if(0!==o.length){a.next=25;break}return a.abrupt("return",r.Fail("The account doesn't hold the coin for adding liqudity: ".concat(d.type.yTokenType.name)));case 25:if(p=n[0],q=o[0],!(p.balance<e)){a.next=29;break}return a.abrupt("return",r.Fail("The account has insuffcient balance for coin ".concat(d.type.xTokenType.name,", current balance: ").concat(p.balance,", expected: ").concat(e)));case 29:if(!(q.balance<f)){a.next=31;break}return a.abrupt("return",r.Fail("The account has insuffcient balance for coin ".concat(d.type.yTokenType.name,", current balance: ").concat(q.balance,", expected: ").concat(f)));case 31:return a.next=33,s._checkGasFeeAvaliable(c,l,[p.addr,q.addr],s.getAddLiqudityEstimatedGas()*s.getGasFeePrice());case 33:if(t=a.sent){a.next=36;break}return a.abrupt("return",r.Fail("Cannot find the gas payment or not enough amount for paying the gas"));case 36:return u={packageObjectId:(0,i.Bl)().suiswap.package,module:"pool",function:"add_liquidity",typeArguments:[d.type.xTokenType.name,d.type.yTokenType.name],arguments:[d.addr,p.addr,q.addr,e.toString(),f.toString()],gasBudget:Number(s.getAddLiqudityEstimatedGas())},a.next=39,s._executeTransacation(u);case 39:return v=a.sent,a.abrupt("return",v);case 41:case"end":return a.stop()}},a)})),function(a){return q.apply(this,arguments)});var t,u=this;this.mintTestCoin=(t=(0,d.Z)(h().mark(function a(b){var c,d,e,f,g,j,l,m,n,o;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=b.client,d=b.amount,e=(0,i.iE)(),f=(0,i.Bl)().suiswap.package,!(d<=0||d>k.Iu.U64_MAX)){a.next=6;break}return a.abrupt("return",r.Fail("Invalid input amount for minting test token: ".concat(d)));case 6:if(void 0!==(g=(0,i.Bl)().suiswap.objects.find(function(a){return a.type=="".concat(f,"::pool::TestTokenSupply")}))){a.next=9;break}return a.abrupt("return",r.Fail("Invalid configuration, could not get the ".concat(f,"::pool::TestTokenSupply from configuration")));case 9:return a.next=11,u.getCurrentAccount();case 11:if(null!==(j=a.sent)){a.next=14;break}return a.abrupt("return",r.Fail("Cannot get the current account address from wallet"));case 14:return l=[],a.prev=15,a.next=18,c.getSortedAccountCoinsArray(j,["".concat(f,"::pool::TestToken")]);case 18:l=a.sent[0],a.next=24;break;case 21:return a.prev=21,a.t0=a.catch(15),a.abrupt("return",r.Fail("Network error while trying to get the test token info from account"));case 24:return n=null===(m=l.length>0?l[0]:null)?{packageObjectId:(0,i.Bl)().suiswap.package,module:"pool",function:"mint_test_token",typeArguments:[],arguments:[g.address,d.toString(),j],gasBudget:Number(u.getMintTestCoinEstimatedGas())}:{packageObjectId:(0,i.Bl)().suiswap.package,module:"pool",function:"mint_test_token_merge",typeArguments:[],arguments:[g.address,d.toString(),m.addr],gasBudget:Number(u.getMintTestCoinEstimatedGas())},a.next=28,u._executeTransacation(n);case 28:return o=a.sent,a.abrupt("return",o);case 30:case"end":return a.stop()}},a,null,[[15,21]])})),function(a){return t.apply(this,arguments)});var v,w,x=this;this.removeLiqudity=(v=(0,d.Z)(h().mark(function a(b){var c,d,e,f,g,j,l,m,n,o;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=b.client,d=b.positionInfo,e=d.poolInfo,f=d.lspCoin,g=d.balance(),j=(0,i.iE)(),!(g<=0||g>k.Iu.U64_MAX)){a.next=8;break}return a.abrupt("return",r.Fail("Invalid input coin, balance is zero"));case 8:return a.next=10,x.getCurrentAccount();case 10:if(null!==(l=a.sent)){a.next=13;break}return a.abrupt("return",r.Fail("Cannot get the current account address from wallet"));case 13:return a.next=15,x._checkGasFeeAvaliable(c,l,[f.addr],x.getRemoveLiqudityEstimatedGas()*x.getGasFeePrice());case 15:if(m=a.sent){a.next=18;break}return a.abrupt("return",r.Fail("Cannot find the gas payment or not enough amount for paying the gas"));case 18:return n={packageObjectId:(0,i.Bl)().suiswap.package,module:"pool",function:"remove_liquidity",typeArguments:[e.type.xTokenType.name,e.type.yTokenType.name],arguments:[e.addr,f.addr,g.toString(),],gasBudget:Number(x.getRemoveLiqudityEstimatedGas())},a.next=21,x._executeTransacation(n);case 21:return o=a.sent,a.abrupt("return",o);case 23:case"end":return a.stop()}},a)})),function(a){return v.apply(this,arguments)}),this.getSwapEstimatedGas=function(){return BigInt(6e3)},this.getAddLiqudityEstimatedGas=function(){return BigInt(6e3)},this.getMintTestCoinEstimatedGas=function(){return BigInt(6e3)},this.getRemoveLiqudityEstimatedGas=function(){return BigInt(6e3)},this._checkGasFeeAvaliable=(w=(0,d.Z)(h().mark(function a(b,c,d,e){var f,g;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.getSortedAccountCoinsArray(c,[b.getPrimaryCoinType().name]);case 2:if(!(0===(g=(f=a.sent[0]).filter(function(a){return -1===d.indexOf(a.addr)})).length||f[0].balance<e)){a.next=6;break}return a.abrupt("return",!1);case 6:return a.abrupt("return",!0);case 7:case"end":return a.stop()}},a)})),function(a,b,c,d){return w.apply(this,arguments)});var y,A=this;this._executeTransacation=(y=(0,d.Z)(h().mark(function a(b){var c,d,e;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(b),a.prev=1,a.next=4,A.wallet.executeMoveCall(b);case 4:if(d=(c=a.sent).certificate.transactionDigest,"failure"!==c.effects.status.status){a.next=9;break}return a.abrupt("return",r.Fail(null!==(e=c.effects.status.error)&& void 0!==e?e:"Transacation[".concat(d,"] failure (unknown reason)"),d,c));case 9:return a.abrupt("return",r.Success(d,c));case 12:return a.prev=12,a.t0=a.catch(1),console.log(a.t0,"_executeTransacation"),a.abrupt("return",r.Fail("Transacation failed",void 0,a.t0));case 16:case"end":return a.stop()}},a,null,[[1,12]])})),function(a){return y.apply(this,arguments)});var B,C=this;this.executeRawTransaction=(B=(0,d.Z)(h().mark(function a(b,c){var d,e;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=c,a.t0=z,a.t1=d,a.t2=(0,i.qT)(),a.next=6,C.getCurrentAccountUnwrap();case 6:return a.t3=a.sent,a.t4={packageAddr:a.t2,sender:a.t3},e=a.t0.toMoveTransaction.call(a.t0,a.t1,a.t4),a.next=11,C._executeTransacation(e);case 11:return a.abrupt("return",a.sent);case 12:case"end":return a.stop()}},a)})),function(a,b){return B.apply(this,arguments)}),this.wallet=b,void 0===this.wallet.disconnect&&(this.disconnect=void 0)},B=function a(b){(0,e.Z)(this,a);var c=this;this.connect=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.petra.connect();case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)}));var f=this;this.disconnect=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.petra.disconnect();case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)}));var g=this;this.isConnected=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.petra.isConnected();case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)}));var i=this;this.account=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.petra.account();case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)}));var j,k=this;this.signAndSubmitTransaction=(j=(0,d.Z)(h().mark(function a(b,c){var d,e,f;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b.arguments=b.arguments.map(function(a){return Array.isArray(a)?a[1].toString():a.toString()}),a.next=3,k.petra.signAndSubmitTransaction(b);case 3:return e=(d=a.sent).hash,f=d.vm_status,a.abrupt("return",{hash:e,message:f});case 7:case"end":return a.stop()}},a)})),function(a,b){return j.apply(this,arguments)}),this.petra=b},C=function a(b){(0,e.Z)(this,a);var c=this;this.isConnected=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",c.walletAdapter.connected);case 1:case"end":return a.stop()}},a)}));var f=this;this.connect=(0,d.Z)(h().mark(function a(){var b;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.walletAdapter.connect();case 2:return a.next=4,f.account();case 4:return b=a.sent,a.abrupt("return",b);case 6:case"end":return a.stop()}},a)}));var g=this;this.disconnect=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.walletAdapter.disconnect();case 2:case"end":return a.stop()}},a)}));var i=this;this.account=(0,d.Z)(h().mark(function a(){var b,c,d;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=(b=i.walletAdapter.publicAccount).address.toString(),d=void 0,null!==b.publicKey&&(Array.isArray(b.publicKey)?b.publicKey.length>0&&(d=b.publicKey[0].toString()):d=b.publicKey.toString()),a.abrupt("return",{address:c,publicKey:d});case 5:case"end":return a.stop()}},a)}));var j,k=this;this.signAndSubmitTransaction=(j=(0,d.Z)(h().mark(function a(b,c){var d,e;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d={type:b.type,function:b.function,type_arguments:b.type_arguments,arguments:b.arguments.map(function(a){return Array.isArray(a)?a[1].toString():a.toString()})},a.next=3,k.walletAdapter.signAndSubmitTransaction(d);case 3:return e=a.sent.hash,a.abrupt("return",{hash:e.toString()});case 5:case"end":return a.stop()}},a)})),function(a,b){return j.apply(this,arguments)}),this.walletAdapter=b};C.NetworkMapping=new Map([["https://fullnode.mainnet.aptoslabs.com",q.WalletAdapterNetwork.Mainnet],["https://https://testnet.aptoslabs.com",q.WalletAdapterNetwork.Testnet],["https://fullnode.devnet.aptoslabs.com",q.WalletAdapterNetwork.Devnet],["https://fullnode.mainnet.aptoslabs.com/v1",q.WalletAdapterNetwork.Mainnet],["https://testnet.aptoslabs.com/v1",q.WalletAdapterNetwork.Testnet],["https://fullnode.devnet.aptoslabs.com/v1",q.WalletAdapterNetwork.Devnet]]),C.getNetwork=function(){var a;return null!==(a=C.NetworkMapping.get((0,i.fV)()))&& void 0!==a?a:q.WalletAdapterNetwork.Mainnet};var D,E=function a(b){(0,e.Z)(this,a);var c=this;this.connect=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.pontem.connect();case 2:return a.next=4,c.account();case 4:return a.abrupt("return",a.sent);case 5:case"end":return a.stop()}},a)}));var f=this;this.isConnected=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.pontem.isConnected();case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)}));var g=this;this.disconnect=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.pontem.disconnect();case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)}));var i=this;this.account=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.pontem.account();case 2:return a.t0=a.sent,a.abrupt("return",{address:a.t0});case 4:case"end":return a.stop()}},a)}));var j,k=this;this.signAndSubmitTransaction=(j=(0,d.Z)(h().mark(function a(b,c){var d,e,f,g,i,j,l,m;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return j={max_gas_amount:null!==(f=null==c?void 0:null===(d=c.maxGasAmount)|| void 0===d?void 0:d.toString())&& void 0!==f?f:"6000",gas_unit_price:null!==(g=null==c?void 0:null===(e=c.gasUnitPrice)|| void 0===e?void 0:e.toString())&& void 0!==g?g:"100",expiration_timestamp_secs:(Math.floor(Date.now()/1e3)+(null!==(i=null==c?void 0:c.expirationSecond)&& void 0!==i?i:90)).toString()},b.arguments=b.arguments.map(function(a){return Array.isArray(a)?a[1].toString():a.toString()}),a.next=6,k.pontem.signAndSubmit(b,j);case 6:return m=(l=a.sent).result.hash,a.abrupt("return",{hash:m});case 9:case"end":return a.stop()}},a)})),function(a,b){return j.apply(this,arguments)}),this.pontem=b},F=function a(b){(0,e.Z)(this,a);var c=this;this.connect=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.martian.connect();case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)}));var f=this;this.disconnect=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.martian.disconnect();case 2:case"end":return a.stop()}},a)}));var g=this;this.isConnected=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.martian.isConnected();case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)}));var i=this;this.account=(0,d.Z)(h().mark(function a(){var b;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.isConnected();case 2:if(b=a.sent){a.next=5;break}throw Error("Martian wallet is not connected, could not get account");case 5:return a.next=7,i.martian.connect();case 7:return a.abrupt("return",a.sent);case 8:case"end":return a.stop()}},a)}));var j,k=this;this.signAndSubmitTransaction=(j=(0,d.Z)(h().mark(function a(b,c){var d,e,f,g,i,j,l,m,n;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return j={max_gas_amount:null!==(f=null==c?void 0:null===(d=c.maxGasAmount)|| void 0===d?void 0:d.toString())&& void 0!==f?f:"6000",gas_unit_price:null!==(g=null==c?void 0:null===(e=c.gasUnitPrice)|| void 0===e?void 0:e.toString())&& void 0!==g?g:"100",expiration_timestamp_secs:(Math.floor(Date.now()/1e3)+(null!==(i=null==c?void 0:c.expirationSecond)&& void 0!==i?i:90)).toString()},b.arguments=b.arguments.map(function(a){return Array.isArray(a)?a[1].toString():a.toString()}),a.next=6,k.account();case 6:return l=a.sent.address,a.next=9,k.martian.generateTransaction(l,b,j);case 9:return m=a.sent,a.next=12,k.martian.signAndSubmitTransaction(m);case 12:return n=a.sent,a.abrupt("return",{hash:n,message:void 0});case 14:case"end":return a.stop()}},a)})),function(a,b){return j.apply(this,arguments)}),this.martian=b},G=function a(b){(0,e.Z)(this,a);var c=this;this.connect=(0,d.Z)(h().mark(function a(){var b,d;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.fewcha.action.connect();case 2:return b=a.sent,d=c._handleResponse(b),a.abrupt("return",{address:d.address,publicKey:d.publicKey});case 5:case"end":return a.stop()}},a)}));var f=this;this.disconnect=(0,d.Z)(h().mark(function a(){var b;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.fewcha.action.disconnect();case 2:b=a.sent,f._handleResponse(b);case 4:case"end":return a.stop()}},a)}));var g=this;this.isConnected=(0,d.Z)(h().mark(function a(){var b,c;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.fewcha.action.isConnected();case 2:return b=a.sent,c=g._handleResponse(b),a.abrupt("return",c);case 5:case"end":return a.stop()}},a)}));var i=this;this.account=(0,d.Z)(h().mark(function a(){var b;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=i,a.next=3,i.fewcha.action.account();case 3:return a.t1=a.sent,b=a.t0._handleResponse.call(a.t0,a.t1),a.abrupt("return",b);case 6:case"end":return a.stop()}},a)}));var j,k=this;this.signAndSubmitTransaction=(j=(0,d.Z)(h().mark(function a(b,c){var d,e,f,g,i,j,l;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return g={max_gas_amount:(null!==(d=null==c?void 0:c.maxGasAmount)&& void 0!==d?d:BigInt(6e3)).toString(),gas_unit_price:(null!==(e=null==c?void 0:c.gasUnitPrice)&& void 0!==e?e:BigInt(100)).toString(),expiration_timestamp_secs:BigInt(Math.floor(Date.now()/1e3)+(null!==(f=null==c?void 0:c.expirationSecond)&& void 0!==f?f:90)).toString()},b.arguments=b.arguments.map(function(a){return Array.isArray(a)?a[1].toString():a.toString()}),i=k.fewcha.action,a.t0=k,a.next=7,i.generateTransaction(b,g);case 7:return a.t1=a.sent,j=a.t0._handleResponse.call(a.t0,a.t1),a.t2=k,a.next=12,i.signAndSubmitTransaction(j);case 12:return a.t3=a.sent,l=a.t2._handleResponse.call(a.t2,a.t3),a.abrupt("return",{hash:l,message:void 0});case 15:case"end":return a.stop()}},a)})),function(a,b){return j.apply(this,arguments)}),this._handleResponse=function(a){if(200===a.status)return a.data;if(401===a.status)throw console.log(a,"fewcha-_handleResponse"),Error("User cancel a popup");if(403===a.status)throw console.log(a,"fewcha-_handleResponse"),Error("Not connect yet, please connect wallet");if(500===a.status){console.log(a,"fewcha-_handleResponse");var b="Network error";throw"string"==typeof a.data&&(b=a.data),Error(b)}throw console.log(a,"fewcha-_handleResponse"),Error("Transaction failed")},this.fewcha=b},H=function a(b){var c=this;(0,e.Z)(this,a),this.findEntryVal=function(a){var b=c.data.filter(function(b){return b.key===a});return 0===b.length?null:b[0].val},this.data=b;var d=this.findEntryVal("txn.min_price_per_gas_unit");this.minGasPrice=null!==d?BigInt(d):null};H.get=(D=(0,d.Z)(h().mark(function a(b){var c,d;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.client.getAccountResource("0x1","0x1::gas_schedule::GasScheduleV2");case 2:return d=(c=a.sent.data).entries,a.abrupt("return",new H(d));case 5:case"end":return a.stop()}},a)})),function(a){return D.apply(this,arguments)});var I=function a(b,c){(0,e.Z)(this,a);var f=this;this.connect=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f.wallet.connect();case 3:return a.abrupt("return","connected");case 6:return a.prev=6,a.t0=a.catch(0),console.log(a.t0,"AptosGeneralWallet-connect"),a.abrupt("return","disconnected");case 10:return a.abrupt("return","unknown");case 11:case"end":return a.stop()}},a,null,[[0,6]])}));var g=this;this.disconnect=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,g.wallet.disconnect();case 3:return a.abrupt("return","disconnected");case 6:a.prev=6,a.t0=a.catch(0),console.log(a.t0,"AptosGeneralWallet-disconnect");case 9:return a.abrupt("return","unknown");case 10:case"end":return a.stop()}},a,null,[[0,6]])}));var l=this;this.isConnected=(0,d.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,l.wallet.isConnected();case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)}));var m=this;this.getCurrentAccount=(0,d.Z)(h().mark(function a(){var b;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m.wallet.account();case 3:return b=a.sent.address,a.abrupt("return",b);case 7:return a.prev=7,a.t0=a.catch(0),a.abrupt("return",null);case 10:return a.abrupt("return",null);case 11:case"end":return a.stop()}},a,null,[[0,7]])})),this.getMintTestCoinType=function(){(0,i.iE)();var a=(0,i.rd)().aptoswap.package;return{name:"".concat(a,"::pool::TestToken"),network:"aptos"}},this.getGasFeePrice=function(){return k.K_._1E2};var n,o=this;this.swap=(n=(0,d.Z)(h().mark(function a(b){var c,d,e,f,g,l,m,n,p,q,r;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=b.client,d=b.pool,e=b.direction,f=b.amount,g=b.minOutputAmount,l=(0,i.rd)().aptoswap.package,m="forward"===e?"swap_x_to_y":"swap_y_to_x",n="forward"===e?d.type.xTokenType:d.type.yTokenType,a.next=10,o._gasCheck(c,(0,j.r2)(n,c.getPrimaryCoinType())?f:k.K_.ZERO,o.getSwapEstimatedGas()*o.getGasFeePrice());case 10:if(!(null!==(p=a.sent))){a.next=13;break}return a.abrupt("return",p);case 13:return q={type:"entry_function_payload",function:"".concat(l,"::pool::").concat(m),type_arguments:[d.type.xTokenType.name,d.type.yTokenType.name],arguments:[f,null!=g?g:k.K_.ZERO]},a.next=16,o._executeTransaction(c,q,"swap");case 16:return r=a.sent,a.abrupt("return",r);case 18:case"end":return a.stop()}},a)})),function(a){return n.apply(this,arguments)});var p,q=this;this.addLiqudity=(p=(0,d.Z)(h().mark(function a(b){var c,d,e,f,g,l,m,n,o,p;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=b.client,d=b.pool,e=b.xAmount,f=b.yAmount,g=(0,i.rd)().aptoswap.package,l=c.getPrimaryCoinType(),m=k.K_.ZERO,(0,j.r2)(d.type.xTokenType,l)?m=e:(0,j.r2)(d.type.yTokenType,l)&&(m=f),a.next=10,q._gasCheck(c,m,q.getAddLiqudityEstimatedGas()*q.getGasFeePrice());case 10:if(!(null!==(n=a.sent))){a.next=13;break}return a.abrupt("return",n);case 13:return o={type:"entry_function_payload",function:"".concat(g,"::pool::add_liquidity"),type_arguments:[d.type.xTokenType.name,d.type.yTokenType.name],arguments:[e,f]},a.next=16,q._executeTransaction(c,o,"swap");case 16:return p=a.sent,a.abrupt("return",p);case 18:case"end":return a.stop()}},a)})),function(a){return p.apply(this,arguments)});var s,t=this;this.removeLiqudity=(s=(0,d.Z)(h().mark(function a(b){var c,d,e,f,g,j,l,m;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=b.client,d=b.positionInfo,e=(0,i.rd)().aptoswap.package,f=d.poolInfo,g=d.balance(),a.next=7,t._gasCheck(c,k.K_.ZERO,t.getRemoveLiqudityEstimatedGas()*t.getGasFeePrice());case 7:if(!(null!==(j=a.sent))){a.next=10;break}return a.abrupt("return",j);case 10:return l={type:"entry_function_payload",function:"".concat(e,"::pool::remove_liquidity"),type_arguments:[f.type.xTokenType.name,f.type.yTokenType.name],arguments:[g]},a.next=13,t._executeTransaction(c,l,"swap");case 13:return m=a.sent,a.abrupt("return",m);case 15:case"end":return a.stop()}},a)})),function(a){return s.apply(this,arguments)});var u,v=this;this.mintTestCoin=(u=(0,d.Z)(h().mark(function a(b){var c,d,e,f,g,j,l;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=b.client,d=b.amount,e=(0,i.rd)().aptoswap.package,a.next=5,v._gasCheck(c,k.K_.ZERO,v.getMintTestCoinEstimatedGas());case 5:if(!(null!==(f=a.sent))){a.next=8;break}return a.abrupt("return",f);case 8:return a.next=10,v.getCurrentAccount();case 10:if(null!==(g=a.sent)){a.next=13;break}return a.abrupt("return",r.Fail("Could not get current account"));case 13:return j={type:"entry_function_payload",function:"".concat(e,"::pool::mint_test_token"),type_arguments:[],arguments:[d,["address",g]]},a.next=16,v._executeTransaction(c,j,"mint-test-token");case 16:return l=a.sent,a.abrupt("return",l);case 18:case"end":return a.stop()}},a)})),function(a){return u.apply(this,arguments)}),this.getSwapEstimatedGas=function(){return BigInt(4e3)},this.getAddLiqudityEstimatedGas=function(){return BigInt(4e3)},this.getMintTestCoinEstimatedGas=function(){return BigInt(2e3)},this.getRemoveLiqudityEstimatedGas=function(){return BigInt(3e3)};var w,x=this;this._gasCheck=(w=(0,d.Z)(h().mark(function a(b,c,d){var e,f;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x.getCurrentAccount();case 2:if(null!==(e=a.sent)){a.next=5;break}return a.abrupt("return",r.Fail("Cannot get account address"));case 5:return a.next=7,b.getSortedAccountCoinsArray(e,[b.getPrimaryCoinType().name]);case 7:if(!(0===(f=a.sent[0]).length||f[0].balance<d)){a.next=12;break}return a.abrupt("return",r.Fail("No enough gas"));case 12:if(!(f[0].balance<d+c)){a.next=14;break}return a.abrupt("return",r.Fail("No estimate enough balance when trying to swap when including gas fee"));case 14:return a.abrupt("return",null);case 15:case"end":return a.stop()}},a)})),function(a,b,c){return w.apply(this,arguments)});var z,A=this;this._executeTransaction=(z=(0,d.Z)(h().mark(function b(c,d,e){var f,g,i,j,k,l,m,n,o,p,q;return h().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(null!==a.gasSchedule){b.next=9;break}return b.prev=1,b.next=4,H.get(c);case 4:a.gasSchedule=b.sent,b.next=9;break;case 7:b.prev=7,b.t0=b.catch(1);case 9:if(!(null===a.gasSchedule||null===a.gasSchedule.minGasPrice)){b.next=11;break}return b.abrupt("return",r.Fail("Unable to fetch the minimum gas fee from fullnode"));case 11:return b.prev=11,console.log(d,"".concat(e,"-transacation")),b.next=15,A.wallet.signAndSubmitTransaction(d,{gasUnitPrice:a.gasSchedule.minGasPrice});case 15:g=(f=b.sent).hash,i=f.message,j=Date.now()/1e3;case 19:return b.prev=20,b.next=23,c.client.waitForTransactionWithResult(g);case 23:if(!(m=null===(l=(k=b.sent).success)|| void 0===l||l)){b.next=30;break}return b.abrupt("return",r.Success(g,k));case 30:return console.log(k,e+"-result(failed)-".concat(g)),n=null!=i?i:"Transaction failed",b.abrupt("return",r.Fail(n,g,k));case 33:b.next=41;break;case 35:if(b.prev=35,b.t1=b.catch(20),!((o=Date.now()/1e3)-j>A.timeout)){b.next=41;break}return console.log(b.t1,e+"-timeout-".concat(g)),b.abrupt("return",r.Timeout(g,b.t1));case 41:b.next=19;break;case 43:b.next=52;break;case 45:return b.prev=45,b.t2=b.catch(11),p=b.t2,console.log(p,e+"-fallback-catch"),q=void 0,"string"==typeof p?q=p:p&&p.message&&"string"==typeof p.message?q=p.message:void 0!==p.toString&&(q=p.toString()),b.abrupt("return",r.Fail(null!=q?q:"Transacation failed",void 0,p));case 52:case"end":return b.stop()}},b,null,[[1,7],[11,45],[20,35]])})),function(a,b,c){return z.apply(this,arguments)});var B,C=this;this.executeRawTransaction=(B=(0,d.Z)(h().mark(function a(b,c){var d,e;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=(0,i.qT)(),a.next=3,C.getCurrentAccount();case 3:return a.t1=a.sent,d={packageAddr:a.t0,sender:a.t1},console.log("data",c),e=y.normalized(c,d),a.next=9,C._executeTransaction(b,e,"raw-transaction");case 9:return a.abrupt("return",a.sent);case 10:case"end":return a.stop()}},a)})),function(a,b){return B.apply(this,arguments)}),this.config=(0,i.iE)(),this.wallet=b,this.timeout=null!=c?c:30};I.gasSchedule=null},1838:function(a,b,c){"use strict";c.d(b,{A:function(){return h}});var d=c(5893),e=c(5675),f=c.n(e),g=c(7815),h=function(a){var b,c,e=a.opacity,h=a.id,i=a.useImage,j=a.blurScale,k=(0,g.o)().window,l=(null!==(b=k.width)&& void 0!==b?b:0)/1725,m=(null!==(c=k.height)&& void 0!==c?c:0)/1130;return(0,d.jsx)("div",{id:h,children:(0,d.jsxs)("div",{style:{width:"100%",height:"100%"},children:[void 0===i|| !0===i?(0,d.jsx)(f(),{src:"/images/misc/blur-background.svg",layout:"fill",alt:"",objectFit:"cover",style:{opacity:e}}):(0,d.jsx)(d.Fragment,{}),(0,d.jsx)("div",{style:{width:"100%",height:"100%",position:"fixed",top:0,left:0,background:"rgba(255, 255, 255, 0.01)",backdropFilter:"blur(".concat(Math.round(100*Math.max(l,m)*(null!=j?j:1)),"px)")}})]})})}},6875:function(a,b,c){"use strict";c.d(b,{"L$":function(){return r},"_N":function(){return q},pn:function(){return s},tP:function(){return l}});var d=c(7568),e=c(1799),f=c(9396),g=c(4051),h=c.n(g),i=c(5893);c(7294);var j=c(2920),k=c(2766);c(993);var l=function(){return(0,i.jsx)(j.Ix,{transition:j.LG})},m={position:"bottom-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!0,draggable:!1,progress:void 0},n=function(a){var b=a.children;return(0,i.jsx)("span",{style:{fontSize:12},children:b})},o=function(a){return(0,i.jsx)("a",(0,f.Z)((0,e.Z)({},a),{target:"_blank",style:{color:"#2e98f1"},children:a.children}))},p=function(a){var b=a.onClick,c=a.children;return(0,i.jsx)("a",{className:"toast-top-error-message no-userselect",onClick:function(){void 0!==b&&b()},children:c})},q=function(a,b){return j.Am.error((0,i.jsx)(n,{children:a}),(0,e.Z)({},m,null!=b?b:{}))},r=function(a,b){return j.Am.info((0,i.jsx)(n,{children:a}),(0,e.Z)({},m,null!=b?b:{}))},s=function(a,b,c){var f;(f=(0,d.Z)(h().mark(function d(){var f,g,l,s,t,u,v,w,x;return h().wrap(function(d){for(var h,y,z,A,B,C,D,E,F;;)switch(d.prev=d.next){case 0:return f="Failed",g=void 0,l=void 0,h="".concat(b," ..."),(0,j.Am)((0,i.jsx)(n,{children:h}),(0,e.Z)({},m,null!=y?y:{})),d.prev=4,d.next=7,c;case 7:(s=d.sent).isSuccess()?(f="Success",l=s.txHash):s.isTimeout()?(f="Timeout",l=s.txHash):(f="Failed",g=s.message,l=s.txHash),d.next=16;break;case 11:d.prev=11,d.t0=d.catch(4),f="Failed",g="".concat(d.t0),console.log(d.t0,"toastTransacation-fallback");case 16:(t=(0,i.jsx)(n,{children:"".concat(b," ").concat(f)}),u=void 0==(z=g)?null:(0,i.jsx)(n,{children:"Message: Transaction Failed"}),v=(A=a,void 0===(B=l)?null:void 0===A.getExplorerHrefForTxHash?(0,i.jsx)(n,{children:"Tx: ".concat(B)}):(0,i.jsx)(o,{href:A.getExplorerHrefForTxHash(B),children:"Link"})),w=(0,i.jsxs)(n,{children:[t,null!==u?(0,i.jsxs)(i.Fragment,{children:[" ",(0,i.jsx)("br",{})," ",u," "]}):(0,i.jsx)(i.Fragment,{}),null!==v?(0,i.jsxs)(i.Fragment,{children:[" ",(0,i.jsx)("br",{})," ",v," "]}):(0,i.jsx)(i.Fragment,{})]}),"Success"==f)?(C=w,j.Am.success((0,i.jsx)(n,{children:C}),(0,e.Z)({},m,null!=D?D:{}))):"Timeout"===f?(E=w,j.Am.warning((0,i.jsx)(n,{children:E}),(0,e.Z)({},m,null!=F?F:{}))):(q(w),void 0!==g&&(x=(0,i.jsxs)(n,{children:[(0,k.dT)(g,100),(0,i.jsx)(p,{onClick:function(){void 0!==window&& void 0!==window.navigator&& void 0!==g&&(window.navigator.clipboard.writeText(g),r((0,i.jsx)(n,{children:"Message Copy !"}),{position:"top-center"}))},children:"  Copy to clipboard"})]}),q(x,{position:"top-center"})));case 21:case"end":return d.stop()}},d,null,[[4,11]])})),function(){return f.apply(this,arguments)})()}},5856:function(){},6601:function(){},5024:function(){}}])